<!DOCTYPE html>
	<head>
		<title>Twitter Wannabe</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
	</head>
	
	<body>
		<h1>The Twitter Wannabe</h1>

		<div class="input">
			<h4 class="label">Message:</h4>
			<input class="stringInput" type="input" id="message">
			<h4 class="label">Sender:</h4>
			<input class="stringInput" type="input" id="sender">
			<button class="button" id="submit">Send Tweet</button>
		</div>
		<div id="theTweets"></div>
	</body>
	
	<script>
		//Initialize Firebase
		var config =
		{
			apiKey: "AIzaSyBDgHk3_m-vqyUbTGIqgCZ8qAb-CoY5ID4",
			authDomain: "luminous-torch-6850.firebaseapp.com",
			databaseURL: "https://luminous-torch-6850.firebaseio.com",
			storageBucket: "luminous-torch-6850.appspot.com",
			messagingSenderId: "825487892602"
		};
		firebase.initializeApp(config);

		var chattyRef = firebase.database().ref("chatty/");
		chattyRef.on('child_added', function(data)
		{
			var message = data.val().message;
			var sender = data.val().sender;
			console.log("Message: " + message + " Sender: " + sender);
			$("#theTweets").prepend("<div class=\"tweet\"><p id=\"message\">" + message + "<br></p>"
				+ "<p id=\"send\">" + sender + "</p></div>");
		});

		chattyRef.on('child_removed', function(data)
		{
		});

		$("document").ready(function()
		{
			$("button").click(function()
			{
				if($("#message").val() == "" || $("#sender").val() == ""){
					alert("Don't leave stuff blank");
				}
				else{
					console.log("clicked");
					var theMessage = $("#message").val();
					var senderName = $("#sender").val();
					var time = new Date();
					var tweetKey = chattyRef.push({
						message: theMessage,
						sender: senderName,
						inReplyTo: "tweetKey",
						timeStamp: time
					}).key;
					$("#message").val('');
					$("#sender").val('');
				}
			});
		});
	</script>
</html>
